@model BPMS01WebUI.Models.AddContractViewModel

@{
    ViewBag.Title = "AddContract";
}

@*
    <script src="../Scripts/jquery-3.2.1.min.js"></script>
*@
<script>
    $(function () {

        $('#testButton').on('click', function () {
            id = $(":input:radio:checked").map(function () {

                return $(this).parent().siblings('td').eq(0).text();  // 根据checkbox定位到后面的td，然后使用text()函数获取内容

            }).get();   // 获取内容数组并拼接为字符串

            staff_no = $(":input:radio:checked").map(function () {

                return $(this).parent().siblings('td').eq(1).text();  // 根据checkbox定位到后面的td，然后使用text()函数获取内容

            }).get();   // 获取内容数组并拼接为字符串

            staff_name = $(":input:radio:checked").map(function () {

                return $(this).parent().siblings('td').eq(2).text();  // 根据checkbox定位到后面的td，然后使用text()函数获取内容

            }).get();   // 获取内容数组并拼接为字符串

            //alert(id);

            //alert(staff_no); 

            alert(staff_name);   // 输出
            
            //document.getElementById('staff_id').value = id;
            $("#staff_id").attr("value", $.trim(id));
            alert($("#staff_id").val());

            $("#staff_name").attr("value",staff_name);
            alert($("#staff_name").val());
        })

    })

    $(function () {

        $('#selectButton').on('click', function () {
            id = $(":input:radio:checked").map(function () {

                return $(this).parent().siblings('td').eq(0).text();  // 根据checkbox定位到后面的td，然后使用text()函数获取内容

            }).get();   // 获取内容数组并拼接为字符串

            staff_no = $(":input:radio:checked").map(function () {

                return $(this).parent().siblings('td').eq(1).text();  // 根据checkbox定位到后面的td，然后使用text()函数获取内容

            }).get();   // 获取内容数组并拼接为字符串

            staff_name = $(":input:radio:checked").map(function () {

                return $(this).parent().siblings('td').eq(2).text();  // 根据checkbox定位到后面的td，然后使用text()函数获取内容

            }).get();   // 获取内容数组并拼接为字符串

            //alert(id);

            //alert(staff_no); 

            //alert(staff_name);   // 输出

            //document.getElementById('staff_id').value = id; //javascript

            $("#staff_id").attr("value", $.trim(id));
            //alert($("#staff_id").val());

            $("#staff_name").attr("value", staff_name);
            //alert($("#staff_name").val());
        })

    })

    $(function () {
        $("#signed_data").datepicker({
            changeMonth: true,
            changeYear: true
        });
    });

</script>


<h2>AddContract</h2>

 <!-- <button id="testButton">测试按钮</button> -->


@using (Html.BeginForm("AddContract", "Contract", FormMethod.Post))
{
    @Html.EditorForModel()
    

    @Html.LabelFor(p => p.staff_id, "承接人")

    //@Html.HiddenFor(p => p.staff_id)        //参考代码：@Html.Hidden("staff_id", "4562c49835d44f7a861f49af4593d6dc") //4562...为林迪南id
    @Html.Hidden("staff_id","123")
    <input type="button" data-toggle="modal" data-target="#popup_id" value="选择承接人" />

    @Html.Label("承接人姓名：")
    @Html.TextBoxFor(p => p.staff_name, new { @readonly = "readonly" })
    <br />

    //<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">选择承接人</button>
    //@Html.ActionLink("列出所有职工", "ListStaff", "Staff")
    //@Html.LabelFor(p => p.staff_id, "")
    //<br />
    //-----------------
    //用分部视图
    /*@foreach (var q in Model.staff)
    {
        <tr>
            <td>
                @Html.DisplayFor(q =>q.staff_no)
            </td>
        </tr>
    }
    */
    //-----------------
    <input type="submit" value="添加" />
}
<br />@ViewBag.message

<div class="modal fade" id="popup_id" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content text-left">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="myModalLabel">请选择职工</h4>

            </div>

                <div class="modal-body">
                    @Html.Action("ListStaff", "Staff")
                </div>
                <div class="modal-footer">
                    <div style="display: inline-block">
                        <button id="selectButton" class="btn btn-default" data-dismiss="modal">选择</button>
                    </div>
                    <div style="display: inline-block">
                        <button class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                </div>


        </div>
    </div>
</div>

